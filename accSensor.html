<html>
<body>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
 <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> 
 </style>
</head>
<body class="w3-container">
<h1>acc sensor 0.42</h1>
<button id="rockIt" class="w3-round w3-xxlarge w3-yellow">⚡</br><span class="w3-small">vibrate</button>
<div id="myList"></div>
<p id = "status">&nbsp;</p>
<div id = "coorList" class="w3-panel w3-pale-green w3-bottombar w3-border-green w3-border" style="display:none;"></div>
<script>
function geoFindMe() {
    /*if (confirm("add to list?")==false){
        return;
    }
    
  
  const mapLink = document.querySelector('#map-link');
    
  mapLink.href = '';
  mapLink.textContent = '';
*/
  const status = document.querySelector('#status');
  function success(position) {
    const latitude  = position.coords.latitude;
    const longitude = position.coords.longitude;
    
    document.getElementById("coorList").style.display = "block"; 
    
    var p = document.createElement("p");
    p.classList.add("w3-tiny");
    p.innerHTML = `lat: ${latitude} °, lon: ${longitude} °`;
    document.getElementById("coorList").append(p);
    CopyToClipboard("coorList");
    
    v();
    status.textContent = 'copied to clipboard!';
    
    
    
    //mapLink.href = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;
    //mapLink.textContent = `Latitude: ${latitude} Â°, Longitude: ${longitude} Â°`;
  }

  function error() {
    status.textContent = 'Unable to retrieve your location';
  }

  if(!navigator.geolocation) {
    status.textContent = 'Geolocation is not supported by your browser';
  } else {
    status.textContent = '..locating..';
    navigator.geolocation.getCurrentPosition(success, error);
  }
    
}
//============================================================================

function CopyToClipboard(containerid) {
  if (document.selection) {
    var range = document.body.createTextRange();
    range.moveToElementText(document.getElementById(containerid));
    range.select().createTextRange();
    document.execCommand("copy");
  } else if (window.getSelection) {
    var range = document.createRange();
    range.selectNode(document.getElementById(containerid));
    window.getSelection().addRange(range);
    document.execCommand("copy");
    //alert("Text has been copied, now paste in the text-area")
  }
}
//************************************************************************************
let acl = new Accelerometer({frequency: 60});
var isPositive;
acl.addEventListener('reading', () => {
  var x = "Acceleration along the X-axis " + acl.x;
  var y = "Acceleration along the Y-axis " + acl.y;
  var z = "Acceleration along the Z-axis " + acl.z;
  //document.getElementById("myList").innerHTML = x + "<br>"+ y  + "<br>"+z;
  if(acl.x<-5 || acl.x>5){
    if(isPositive != (acl.x>0)){
        isPositive = (acl.x>0);
        //document.getElementById("myList").innerHTML = acl.x;
        
        //var p = document.createElement("p");
        //p.classList.add("w3-tiny");
        //p.innerHTML = acl.x;
        //document.getElementById("myList").append(p);
        geoFindMe();
        
    }
  }
});
acl.start();
function v(){
    if (navigator.vibrate) { 
        window.navigator.vibrate(300); 
    } 
}
document.querySelector('#rockIt').addEventListener('click', v);
</script>
</body>
</html>